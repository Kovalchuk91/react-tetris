(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(30)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(7),l=n.n(a),c=(n(18),n(3)),u=n(1),i=n(8),s=n(9),f=n(11),d=n(10),m=n(12),v=(n(19),function(e){return e[Math.floor(Math.random()*e.length)]}),g=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e(n)),t[n]}},h=g((function(e){for(var t=[],n=0;n<e;n+=1)t.push(n);return t})),b=n(2),C=n.n(b),p=(n(25),function(e){var t=e.color,n=e.transparent,r={};if(t){var a=g((function(e){return C()(e).lighten(.2).hex()}))(t),l=g((function(e){return C()(e).darken(.2).hex()}))(t);r={backgroundColor:t,borderTopColor:a,borderLeftColor:a,borderRightColor:l,borderBottomColor:l,borderStyle:"solid"}}else r=n?{backgroundColor:"transparent"}:{backgroundColor:"#303030"};return o.a.createElement("td",{className:"Cell",style:{borderStyle:n?"hidden":"solid"}},o.a.createElement("div",{className:"Cell-cube",style:r}))}),E=function(e){var t=e.row,n=e.cellColor;return o.a.createElement("tr",null,h(11).map((function(e){return o.a.createElement(p,{key:e,color:n(t,e)})})))},y=(n(26),function(e){var t=e.cellColor;return o.a.createElement("div",{className:"Board",style:{borderLeft:"3px solid #1B2433",borderTop:"3px solid #1B2433",borderRight:"3px solid #3C5F9E",borderBottom:"3px solid #3C5F9E"}},o.a.createElement("table",{className:"Board-table"},o.a.createElement("tbody",null,h(22).map((function(e){return o.a.createElement(E,{cellColor:t,row:e,key:e})})))))}),w={getWidth:function(){return 2},getAllCells:function(e,t){return[[e,t],[e+1,t+1],[e,t+1],[e+1,t]]}},x=(n(27),function(e){var t=e.figure,n=e.color,r=t.getWidth(0),a=t.getWidth(1),l=function(e,n){return t.getAllCells(0,0,0).some((function(t){var r=Object(u.a)(t,2),o=r[0],a=r[1];return o===n&&e===a}))};return o.a.createElement("div",null,o.a.createElement("h3",{className:"Next-heading"},"Next"),o.a.createElement("div",{className:"Next-block"},o.a.createElement("table",{className:"Next-table"},o.a.createElement("tbody",null,h(a).map((function(e){return o.a.createElement("tr",{key:e},h(r).map((function(t){return o.a.createElement(p,{color:l(e,t)?n:null,transparent:!0,key:t})})))}))))))}),k=(n(28),function(e){var t=e.title,n=e.info;return o.a.createElement("div",{className:"Info"},o.a.createElement("h3",{className:"Info-heading"},t),o.a.createElement("div",{className:"Info-block"},n))}),N=(n(29),function(e){var t=e.up,n=e.left,a=e.right,l=e.down,c=Object(r.useState)(null),i=Object(u.a)(c,2),s=i[0],f=i[1],d=function(e,t){return f(setInterval(e,t))},m=function(){return clearInterval(s)};return o.a.createElement("div",{className:"Controls"},o.a.createElement("button",{type:"button",onClick:n,onMouseDown:function(){return d(n,200)},onTouchStart:function(){return d(n,200)},onMouseUp:m,onMouseLeave:m,onTouchEnd:m},o.a.createElement("span",{className:"ControlsIcon icon-arrow-long-left"})),o.a.createElement("button",{type:"button",onClick:t},o.a.createElement("span",{className:"ControlsIcon icon-cycle"})),o.a.createElement("button",{type:"button",onClick:l,onMouseDown:function(){return d(l,100)},onTouchStart:function(){return d(l,200)},onMouseUp:m,onMouseLeave:m,onTouchEnd:m},o.a.createElement("span",{className:"ControlsIcon icon-arrow-long-down"})),o.a.createElement("button",{type:"button",onClick:a,onMouseDown:function(){return d(a,200)},onTouchStart:function(){return d(a,200)},onMouseUp:m,onMouseLeave:m,onTouchEnd:m},o.a.createElement("span",{className:"ControlsIcon icon-arrow-long-right"})))}),O=[{getWidth:function(e){return e%2===0?1:4},getAllCells:function(e,t,n){return n%2===0?[[e,t],[e,t+1],[e,t+2],[e,t+3]]:[[e,t],[e+1,t],[e+2,t],[e+3,t]]}},w,{getWidth:function(e){return e%2===0?3:2},getAllCells:function(e,t,n){return 0===n?[[e+1,t],[e,t+1],[e+1,t+1],[e+2,t+1]]:1===n?[[e,t],[e,t+1],[e,t+2],[e+1,t+1]]:2===n?[[e,t],[e+1,t],[e+2,t],[e+1,t+1]]:3===n?[[e,t+1],[e+1,t],[e+1,t+1],[e+1,t+2]]:null}},{getWidth:function(e){return e%2===0?2:3},getAllCells:function(e,t,n){return 0===n?[[e,t],[e+1,t],[e,t+1],[e,t+2]]:1===n?[[e,t],[e+1,t],[e+2,t],[e+2,t+1]]:2===n?[[e,t+2],[e+1,t],[e+1,t+1],[e+1,t+2]]:3===n?[[e,t],[e,t+1],[e+1,t+1],[e+2,t+1]]:null}},{getWidth:function(e){return e%2===0?2:3},getAllCells:function(e,t,n){return 0===n?[[e,t],[e+1,t],[e+1,t+1],[e+1,t+2]]:1===n?[[e+2,t],[e,t+1],[e+1,t+1],[e+2,t+1]]:2===n?[[e+1,t+2],[e,t],[e,t+1],[e,t+2]]:3===n?[[e,t],[e,t+1],[e+1,t],[e+2,t]]:null}},{getWidth:function(e){return e%2===0?2:3},getAllCells:function(e,t,n){return n%2===0?[[e+1,t],[e,t+1],[e,t+2],[e+1,t+1]]:[[e,t],[e+1,t],[e+1,t+1],[e+2,t+1]]}},{getWidth:function(e){return e%2===0?2:3},getAllCells:function(e,t,n){return n%2===0?[[e,t],[e,t+1],[e+1,t+2],[e+1,t+1]]:[[e+1,t+1],[e+1,t],[e,t+1],[e+2,t]]}}],S=["#f2c202","#F16B54","#55BB80","#504DA0","#F6904D","#22C0F2"],F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={isRunning:!1,level:1,score:0,timer:null,filledCells:[],figure:w,color:null,nextFigure:null,nextColor:null,rotate:0,x:0,y:0},n.startLevel=function(e){alert("Level ".concat(e)),n.setState({level:e}),clearInterval(n.state.timer),n.newFigure();var t=setInterval(n.moveDown,800/e);n.setState({timer:t})},n.newFigure=function(){var e=v(O),t=n.state.nextFigure,r=v(S),o=n.state.nextColor,a=Math.floor(3*Math.random()),l=Math.abs(Math.floor(11*Math.random()-t.getWidth(a)));n.setState({figure:t,nextFigure:e,color:o,nextColor:r,x:l,y:0,rotate:a},n.checkIfGameOver)},n.checkIfGameOver=function(){n.figureShouldFreeze()&&(n.setState({isRunning:!1}),clearInterval(n.state.timer),window.confirm("Game over! Restart?")?window.location.reload():window.close())},n.moveDown=function(){var e=n.state.y;n.setState({y:e+1},(function(){n.figureShouldFreeze()&&(n.freezeFigure(),n.newFigure())}))},n.moveLeft=function(){var e=n.state,t=e.x,r=e.y,o=e.rotate,a=e.figure;if(0!==t){var l=t-1;!a.getAllCells(l,r,o).some((function(e){var t=Object(u.a)(e,2),r=t[0],o=t[1];return n.cellIsFilled(o,r)}))&&n.setState({x:t-1})}},n.moveRight=function(){var e=n.state,t=e.x,r=e.y,o=e.rotate,a=e.figure;if(t!==11-a.getWidth(o)){var l=t+1;!a.getAllCells(l,r,o).some((function(e){var t=Object(u.a)(e,2),r=t[0],o=t[1];return n.cellIsFilled(o,r)}))&&n.setState({x:t+1})}},n.rotate=function(){var e=n.state,t=e.rotate,r=e.figure,o=e.x,a=e.y,l=3===t?0:t+1,c=r.getWidth(t),u=r.getWidth(l),i=o,s=a;o+c===11&&c<u&&(i=o-(u-c)),c>u&&(s=a-Math.ceil((c-u)/2)),n.setState({rotate:l,x:i,y:s})},n.figureShouldFreeze=function(){var e=n.state,t=e.figure,r=e.x,o=e.y,a=e.rotate,l=t.getAllCells(r,o,a);if(l.some((function(e){var t=Object(u.a)(e,2);t[0];return 21===t[1]})))return!0;var c=n.state.filledCells;return l.some((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return c.some((function(e){var t=Object(u.a)(e,2),o=t[0],a=t[1];return o===n&&a===r+1}))}))},n.freezeFigure=function(){var e=n.state,t=e.filledCells,r=e.x,o=e.y,a=e.rotate,l=e.color,u=n.state.figure.getAllCells(r,o,a).map((function(e){return e.push(l),e}));n.setState({filledCells:[].concat(Object(c.a)(t),Object(c.a)(u))},n.removeFilledRows)},n.removeFilledRows=function(){for(var e=n.state.filledCells,t=0,r=e,o=[],a=function(e){11===r.filter((function(t){var n=Object(u.a)(t,2);n[0];return n[1]===e})).length&&(o.push(e),r=(r=r.filter((function(t){var n=Object(u.a)(t,2);n[0];return n[1]!==e}))).map((function(t){var n=Object(u.a)(t,3),r=n[0],o=n[1],a=n[2];return o<e?[r,o+1,a]:[r,o,a]})),t+=1)},l=0;l<=22;l+=1)a(l);n.setState({filledCells:r}),n.addScores(t)},n.addScores=function(e){var t=n.state,r=t.level,o=t.score,a=0;switch(e){case 1:a+=50*(r+1);break;case 2:a+=150*(r+1);break;case 3:a+=350*(r+1);break;case 4:a+=1e3*(r+1);break;default:return}var l=o+a;n.setState({score:l}),Math.ceil(l/1e3)>r&&n.startLevel(r+1)},n.cellIsFilled=function(e,t){return n.state.filledCells.some((function(n){var r=Object(u.a)(n,2),o=r[0],a=r[1];return o===t&&a===e}))},n.cellColor=function(e,t){var r=n.state,o=r.filledCells,a=r.x,l=r.y,c=r.rotate,i=r.color;if(r.figure.getAllCells(a,l,c).find((function(n){var r=Object(u.a)(n,2),o=r[0],a=r[1];return o===t&&e===a})))return i;var s=o.find((function(n){var r=Object(u.a)(n,2),o=r[0],a=r[1];return o===t&&e===a}));return s?s[2]:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.onkeydown=function(t){38===(t=t||window.event).keyCode?e.rotate():40===t.keyCode?e.moveDown():37===t.keyCode?e.moveLeft():39===t.keyCode&&e.moveRight()};var t=v(O),n=v(S);this.setState({nextFigure:t,nextColor:n},(function(){return e.startLevel(1)}))}},{key:"render",value:function(){var e=this.state,t=e.level,n=e.score,r=e.nextFigure,a=e.nextColor;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"App-main"},o.a.createElement("div",{className:"App-board"},o.a.createElement(y,{cellColor:this.cellColor})),o.a.createElement("div",{className:"App-info"},o.a.createElement(k,{title:"Level",info:t}),o.a.createElement(k,{title:"Score",info:n}),a&&o.a.createElement(x,{figure:r,color:a}))),o.a.createElement("div",{className:"App-controls"},o.a.createElement(N,{up:this.rotate,left:this.moveLeft,right:this.moveRight,down:this.moveDown})))}}]),t}(o.a.Component);l.a.render(o.a.createElement(F,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.896f14d7.chunk.js.map